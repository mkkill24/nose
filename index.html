<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login y Conversor</title>
    <style>
        .hidden { display: none; }
    </style>
</head>
<body>
    <div id="login-container">
        <h2>Iniciar Sesión</h2>
        <input type="text" id="username" placeholder="Usuario">
        <input type="password" id="password" placeholder="Contraseña">
        <p>Ingrese el CAPTCHA: <span id="captchaText"></span></p>
        <input type="text" id="captchaInput" placeholder="Escriba el CAPTCHA">
        <button onclick="generateCaptcha()">Refrescar CAPTCHA</button>
        <button id="loginButton">Ingresar</button>
    </div>

    <div id="menu" class="hidden">
        <h2>Menú</h2>
        <button onclick="showConverter('mxn')">Convertir Pesos a Dólares</button>
        <button onclick="showConverter('usd')">Convertir Dólares a Pesos</button>
    </div>

    <div id="converter" class="hidden">
        <h2 id="converterTitle"></h2>
        <input type="number" id="amount" placeholder="Ingrese cantidad">
        <button onclick="convert()">Convertir</button>
        <p id="result"></p>
    </div>

    <script>
        function generateCaptcha() {
            const captcha = Math.random().toString(36).substring(2, 8).toUpperCase();
            document.getElementById('captchaText').textContent = captcha;
        }
        
        document.getElementById('loginButton').addEventListener('click', function() {
            const username = document.getElementById('username').value;
            const password = document.getElementById('password').value;
            const captchaInput = document.getElementById('captchaInput').value;
            const captchaText = document.getElementById('captchaText').textContent;

            if (captchaInput !== captchaText) {
                alert('El CAPTCHA ingresado es incorrecto. Inténtelo de nuevo.');
                generateCaptcha();
                return;
            }

            if (username === 'roberto' && password === 'tochi1234') {
                document.getElementById('login-container').classList.add('hidden');
                document.getElementById('menu').classList.remove('hidden');
            } else {
                alert('Usuario o contraseña incorrectos.');
            }
        });

        function showConverter(type) {
            document.getElementById('menu').classList.add('hidden');
            document.getElementById('converter').classList.remove('hidden');
            document.getElementById('converterTitle').textContent =
                type === 'mxn' ? 'Convertir de Pesos a Dólares' : 'Convertir de Dólares a Pesos';
        }

        function convert() {
            const amount = parseFloat(document.getElementById('amount').value);
            if (isNaN(amount) || amount <= 0) {
                alert('Ingrese una cantidad válida.');
                return;
            }

            let conversionRate = 0.058; // 1 MXN = 0.058 USD (ejemplo)
            let resultText;
            if (document.getElementById('converterTitle').textContent.includes('Pesos')) {
                resultText = `${amount} MXN equivale a ${(amount * conversionRate).toFixed(2)} USD`;
            } else {
                resultText = `${amount} USD equivale a ${(amount / conversionRate).toFixed(2)} MXN`;
            }
            document.getElementById('result').textContent = resultText;
        }

        generateCaptcha();
    </script>
</body>
</html>
